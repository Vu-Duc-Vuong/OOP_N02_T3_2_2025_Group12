<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1004px" preserveAspectRatio="none" style="width:1393px;height:1004px;" version="1.1" viewBox="0 0 1393 1004" width="1393px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kb98yc9pzjti" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="378" x="508.75" y="26.708">Sequence Diagram - Tính Toán Doanh Thu</text><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="842.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="151" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="741.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="338" y="133.5156"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="162.6484"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="410.7109"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="775" y="191.7813"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885.5" y="439.8438"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970.5" y="245.0469"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178.5" y="493.1094"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="466" x="717.5" y="206.7813"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="550" x="832.5" y="454.8438"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="160.3359" style="stroke: #000000; stroke-width: 2.0;" width="226.5" x="262.5" y="686.7734"/><rect fill="#FFFFFF" height="56.9375" style="stroke: none; stroke-width: 1.0;" width="226.5" x="262.5" y="746.0391"/><rect fill="#FFFFFF" height="44.1328" style="stroke: none; stroke-width: 1.0;" width="226.5" x="262.5" y="802.9766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="33" x2="33" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="156" x2="156" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="342.5" x2="342.5" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="656.5" x2="656.5" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="779.5" x2="779.5" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="890.5" x2="890.5" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="975.5" x2="975.5" y1="73.25" y2="964.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1183" x2="1183" y1="73.25" y2="964.5078"/><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="57.9482">User</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="8" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="15" y="983.5029">User</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="77" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="84" y="57.9482">DoanhThuController</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="77" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="84" y="983.5029">DoanhThuController</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="272.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="279.5" y="57.9482">DoanhThuService</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="272.5" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="279.5" y="983.5029">DoanhThuService</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="611.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="618.5" y="57.9482">DoanhThu</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="611.5" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="618.5" y="983.5029">DoanhThu</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="727.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="734.5" y="57.9482">QuanLyNhap</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="727.5" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="87" x="734.5" y="983.5029">QuanLyNhap</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="842.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="849.5" y="57.9482">QuanLyBan</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="842.5" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="849.5" y="983.5029">QuanLyBan</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="948.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="955.5" y="57.9482">Nhap</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="948.5" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="955.5" y="983.5029">Nhap</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="1161" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="1168" y="57.9482">Ban</text><rect fill="#FEFECE" filter="url(#f1kb98yc9pzjti)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="1161" y="963.5078"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="1168" y="983.5029">Ban</text><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="842.125" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="151" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="741.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="338" y="133.5156"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="162.6484"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="218.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="652" y="410.7109"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="775" y="191.7813"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="160.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="885.5" y="439.8438"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="970.5" y="245.0469"/><rect fill="#FFFFFF" filter="url(#f1kb98yc9pzjti)" height="71.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1178.5" y="493.1094"/><polygon fill="#A80036" points="139,100.3828,149,104.3828,139,108.3828,143,104.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="33" x2="145" y1="104.3828" y2="104.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="40" y="99.3169">GET /doanhthu</text><polygon fill="#A80036" points="326,129.5156,336,133.5156,326,137.5156,330,133.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="161" x2="332" y1="133.5156" y2="133.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="168" y="128.4497">tinhTongNhap()</text><polygon fill="#A80036" points="640,158.6484,650,162.6484,640,166.6484,644,162.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="646" y1="162.6484" y2="162.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="355" y="157.5825">tinhTongNhap()</text><polygon fill="#A80036" points="763,187.7813,773,191.7813,763,195.7813,767,191.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="662" x2="769" y1="191.7813" y2="191.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="669" y="186.7153">tongNhap()</text><path d="M717.5,206.7813 L794.5,206.7813 L794.5,213.7813 L784.5,223.7813 L717.5,223.7813 L717.5,206.7813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="466" x="717.5" y="206.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="732.5" y="219.8481">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="809.5" y="218.9917">[for each Nhap in danhSachNhap]</text><polygon fill="#A80036" points="958.5,241.0469,968.5,245.0469,958.5,249.0469,962.5,245.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="785" x2="964.5" y1="245.0469" y2="245.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="792" y="239.981">tongTien()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="980.5" x2="1022.5" y1="274.1797" y2="274.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1022.5" x2="1022.5" y1="274.1797" y2="287.1797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981.5" x2="1022.5" y1="287.1797" y2="287.1797"/><polygon fill="#A80036" points="991.5,283.1797,981.5,287.1797,991.5,291.1797,987.5,287.1797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="987.5" y="269.1138">soLuongNhap * hang.donGia</text><polygon fill="#A80036" points="796,312.3125,786,316.3125,796,320.3125,792,316.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="790" x2="974.5" y1="316.3125" y2="316.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="802" y="311.2466">tienNhap</text><polygon fill="#A80036" points="673,348.4453,663,352.4453,673,356.4453,669,352.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="667" x2="779" y1="352.4453" y2="352.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="679" y="347.3794">tongTienNhap</text><polygon fill="#A80036" points="359,377.5781,349,381.5781,359,385.5781,355,381.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="353" x2="656" y1="381.5781" y2="381.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="365" y="376.5122">tongTienNhap</text><polygon fill="#A80036" points="640,406.7109,650,410.7109,640,414.7109,644,410.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="646" y1="410.7109" y2="410.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="355" y="405.645">tinhTongBan()</text><polygon fill="#A80036" points="873.5,435.8438,883.5,439.8438,873.5,443.8438,877.5,439.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="662" x2="879.5" y1="439.8438" y2="439.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="669" y="434.7778">tongBan()</text><path d="M832.5,454.8438 L909.5,454.8438 L909.5,461.8438 L899.5,471.8438 L832.5,471.8438 L832.5,454.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="117.5313" style="stroke: #000000; stroke-width: 2.0;" width="550" x="832.5" y="454.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="847.5" y="467.9106">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="200" x="924.5" y="467.0542">[for each Ban in danhSachBan]</text><polygon fill="#A80036" points="1166.5,489.1094,1176.5,493.1094,1166.5,497.1094,1170.5,493.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="895.5" x2="1172.5" y1="493.1094" y2="493.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="902.5" y="488.0435">tongTien()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1188.5" x2="1230.5" y1="522.2422" y2="522.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1230.5" x2="1230.5" y1="522.2422" y2="535.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1189.5" x2="1230.5" y1="535.2422" y2="535.2422"/><polygon fill="#A80036" points="1199.5,531.2422,1189.5,535.2422,1199.5,539.2422,1195.5,535.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1195.5" y="517.1763">soLuongBan * hang.donGia</text><polygon fill="#A80036" points="906.5,560.375,896.5,564.375,906.5,568.375,902.5,564.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="900.5" x2="1182.5" y1="564.375" y2="564.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="912.5" y="559.3091">tienBan</text><polygon fill="#A80036" points="673,596.5078,663,600.5078,673,604.5078,669,600.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="667" x2="889.5" y1="600.5078" y2="600.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="679" y="595.4419">tongTienBan</text><polygon fill="#A80036" points="359,625.6406,349,629.6406,359,633.6406,355,629.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="353" x2="656" y1="629.6406" y2="629.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="365" y="624.5747">tongTienBan</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="390" y1="658.7734" y2="658.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="390" y1="658.7734" y2="671.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="390" y1="671.7734" y2="671.7734"/><polygon fill="#A80036" points="359,667.7734,349,671.7734,359,675.7734,355,671.7734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="355" y="653.7075">tinhDoanhThu = tongTienBan - tongTienNhap</text><path d="M262.5,686.7734 L326.5,686.7734 L326.5,693.7734 L316.5,703.7734 L262.5,703.7734 L262.5,686.7734 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="160.3359" style="stroke: #000000; stroke-width: 2.0;" width="226.5" x="262.5" y="686.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="277.5" y="699.8403">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="341.5" y="698.9839">[if doanhThu &gt; 0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="390" y1="725.0391" y2="725.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="390" y1="725.0391" y2="738.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="390" y1="738.0391" y2="738.0391"/><polygon fill="#A80036" points="359,734.0391,349,738.0391,359,742.0391,355,738.0391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="355" y="719.9731">status = "Lãi"</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="262.5" x2="489" y1="747.0391" y2="747.0391"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="267.5" y="757.2495">[if doanhThu &lt; 0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="390" y1="781.9766" y2="781.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="390" y1="781.9766" y2="794.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="390" y1="794.9766" y2="794.9766"/><polygon fill="#A80036" points="359,790.9766,349,794.9766,359,798.9766,355,794.9766" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="355" y="776.9106">status = "Lỗ"</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="262.5" x2="489" y1="803.9766" y2="803.9766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348" x2="390" y1="826.1094" y2="826.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="390" y1="826.1094" y2="839.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349" x2="390" y1="839.1094" y2="839.1094"/><polygon fill="#A80036" points="359,835.1094,349,839.1094,359,843.1094,355,839.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="355" y="821.0435">status = "Hòa vốn"</text><polygon fill="#A80036" points="172,871.2422,162,875.2422,172,879.2422,168,875.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="166" x2="342" y1="875.2422" y2="875.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="178" y="870.1763">DoanhThuData</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="161" x2="203" y1="904.375" y2="904.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="203" y1="904.375" y2="917.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162" x2="203" y1="917.375" y2="917.375"/><polygon fill="#A80036" points="172,913.375,162,917.375,172,921.375,168,917.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="168" y="899.3091">model.addAttribute(data)</text><polygon fill="#A80036" points="44,942.5078,34,946.5078,44,950.5078,40,946.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="38" x2="155" y1="946.5078" y2="946.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="50" y="941.4419">doanhthu.html</text><!--MD5=[f94c484b2c68780c97d68937786d82ff]
@startuml sequence-diagram-doanh-thu
title Sequence Diagram - Tính Toán Doanh Thu

participant "User" as User
participant "DoanhThuController" as Controller
participant "DoanhThuService" as Service  
participant "DoanhThu" as DoanhThu
participant "QuanLyNhap" as QuanLyNhap
participant "QuanLyBan" as QuanLyBan
participant "Nhap" as Nhap
participant "Ban" as Ban

User -> Controller : GET /doanhthu
activate Controller

Controller -> Service : tinhTongNhap()
activate Service

Service -> DoanhThu : tinhTongNhap()
activate DoanhThu

DoanhThu -> QuanLyNhap : tongNhap()
activate QuanLyNhap

loop for each Nhap in danhSachNhap
    QuanLyNhap -> Nhap : tongTien()
    activate Nhap
    Nhap -> Nhap : soLuongNhap * hang.donGia
    Nhap - -> QuanLyNhap : tienNhap
    deactivate Nhap
end

QuanLyNhap - -> DoanhThu : tongTienNhap
deactivate QuanLyNhap

DoanhThu - -> Service : tongTienNhap
deactivate DoanhThu

Service -> DoanhThu : tinhTongBan()
activate DoanhThu

DoanhThu -> QuanLyBan : tongBan()
activate QuanLyBan

loop for each Ban in danhSachBan
    QuanLyBan -> Ban : tongTien()
    activate Ban
    Ban -> Ban : soLuongBan * hang.donGia
    Ban - -> QuanLyBan : tienBan
    deactivate Ban
end

QuanLyBan - -> DoanhThu : tongTienBan
deactivate QuanLyBan

DoanhThu - -> Service : tongTienBan
deactivate DoanhThu

Service -> Service : tinhDoanhThu = tongTienBan - tongTienNhap

alt if doanhThu > 0
    Service -> Service : status = "Lãi"
else if doanhThu < 0  
    Service -> Service : status = "Lỗ"
else
    Service -> Service : status = "Hòa vốn"
end

Service - -> Controller : DoanhThuData
deactivate Service

Controller -> Controller : model.addAttribute(data)

Controller - -> User : doanhthu.html
deactivate Controller

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.14.1+1-LTS
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>